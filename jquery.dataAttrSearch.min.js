(function(e){e.fn.dataAttrSearch=function(t,n,r,i){function f(t){if(t==""){e("[data-"+a+"]").show();e(".searchStatus").hide();return false}var n=h(t,u);var r=0;e("[data-"+a+"]").each(function(){var t=e(this).attr("data-"+a).replace("-"," ").replace(/[^a-zA-Z ]/g,"").split(" ");var i=false;for(var s=0;s<n.length;s++){var o=p(n[s]);for(var u=0;u<t.length;u++){if(o.test(t[u])){i=true}}}if(i==true){e(this).show();r++}else{e(this).hide()}});e(".resultCount").text(r);e(".searchStatus").show()}function l(t){var n=e('<button class="dataSearchButton">Search</button>');n.click(function(){f(t.val())});return n}function c(t){var n=e('<button class="dataClearButton">Clear Search</button>');n.click(function(){t.val("");e("[data-"+a+"]").show();e(".searchStatus").hide()});return n}function h(e,t){var n=e.match(/\w+/g),r={},i=[],s,o;t=t.split(",");for(o=0;o<t.length;o++){r[t[o].trim()]=true}for(o=0;o<n.length;o++){s=n[o].trim().toLowerCase();if(!r[s]){i.push(s)}}return i}function p(e){return new RegExp("\\b"+e.replace(/\\/g,"\\\\"),"gi")}var s={};var o;var u="the, it is, we, all, a, an, by, to, you, me, he, do, she, they, we, how, it, i, are, to, for, of";if(t){var a=t.replace("data-","")}else{var a="tags"}this.each(function(){var t=e(this);t.wrap("<div/>");var s=t.parent();if(n==true){s.append(l(t))}if(r==true){s.append(c(t))}if(i==true){s.append('<p style="display:none" class="searchStatus">Search Reuturned <span class="resultCount"></span> out of '+e("[data-"+a+"]").length+"</p>")}t.on("keyup",function(){var t=e(this);window.clearTimeout(o);o=window.setTimeout(function(){f(t.val())},100)});t.on("blur",function(){var t=e(this);window.clearTimeout(o);o=window.setTimeout(function(){f(t.val())},100)})});return this}})(jQuery)