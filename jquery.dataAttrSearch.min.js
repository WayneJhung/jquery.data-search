(function(c){c.fn.dataAttrSearch=function(k,l,m){function f(a){console.log(a);if(""==a)return c("[data-"+g+"]").show(),c(".searchStatus").hide(),!1;var b=n;a=a.match(/\w+/g);var h={},e=[],d,b=b.split(",");for(d=0;d<b.length;d++)h[b[d].trim()]=!0;for(d=0;d<a.length;d++)b=a[d].trim().toLowerCase(),h[b]||e.push(b);var f=0;c("[data-"+g+"]").each(function(){for(var a=c(this).attr("data-"+g).replace("-"," ").replace(/[^a-zA-Z ]/g,"").split(" "),b=!1,d=0;d<e.length;d++)for(var h=RegExp("\\b"+e[d].replace(/\\/g,
"\\\\"),"gi"),j=0;j<a.length;j++)h.test(a[j])&&(b=!0);!0==b?(c(this).show(),f++):c(this).hide()});c(".resultCount").text(f);c(".searchStatus").show()}function p(a){var b=c('<button class="dataSearchButton">Search</button>');b.click(function(){f(a.val())});return b}function q(a){var b=c('<button class="dataClearButton">Clear Search</button>');b.click(function(){a.val("");c("[data-"+g+"]").show();c(".searchStatus").hide()});return b}var e,n="the, it is, we, all, a, an, by, to, you, me, he, do, she, they, we, how, it, i, are, to, for, of",
g=k?k.replace("data-",""):"tags";this.each(function(){var a=c(this);a.wrap("<div/>");var b=a.parent();!0==l&&b.append(p(a));!0==m&&b.append(q(a));b.append('<p style="display:none" class="searchStatus">Search Reuturned <span class="resultCount"></span> out of '+c("[data-"+g+"]").length+"</p>");a.on("keyup",function(){var a=c(this);window.clearTimeout(e);e=window.setTimeout(function(){f(a.val())},100)});a.on("blur",function(){var a=c(this);window.clearTimeout(e);e=window.setTimeout(function(){f(a.val())},
100)})});return this}})(jQuery);